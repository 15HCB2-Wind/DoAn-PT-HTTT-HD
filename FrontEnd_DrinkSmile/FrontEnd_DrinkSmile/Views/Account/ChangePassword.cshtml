@{
    ViewBag.Title = "Đổi mật khẩu";
}
<div class="row">
    <div class="offset-lg-3 col-lg-6 offset-md-2 col-md-8 offset-sm-1 col-sm-10 col-xs-12 mt-2">
        <div class="card">
            @using (Html.BeginForm("ChangePassword", "Manage", FormMethod.Post, new { @class = "card-block", @id = "form_changepass", role = "form" }))
            {
                @Html.AntiForgeryToken()
                <div class="form-header bg-primary">
                    <h3><i class="fa fa-refresh"></i> Đổi mật khẩu</h3>
                </div>
                @Html.ValidationSummary(true, "", new { @class = "text-danger text-center" })
                <p id="error" class="text-danger text-center"></p>
                <div class="md-form">
                    <i class="fa fa-lock prefix"></i>
                    <input id="oldpass" class="form-control" type="password" />
                    <label for="oldpass">Mật khẩu cũ</label>
                </div>
                <div class="md-form">
                    <i class="fa fa-lock prefix"></i>
                    <input id="newpass" class="form-control" type="password" />
                    <label id="newpass_error" for="newpass">Mật khẩu mới</label>
                </div>
                <div class="md-form">
                    <i class="fa fa-lock prefix"></i>
                    <input id="repass" class="form-control validate" type="password" />
                    <label id="repass_error" for="repass">Nhập lại mật khẩu</label>
                </div>
                <div class="text-center">
                    <button type="submit" class="btn btn-primary">Đổi mật khẩu</button>
                </div>
            }
        </div>
    </div>
</div>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script>
        $(document).ready(function () {
            $("#repass").blur(function () {
                if ($("#repass").val() != "") {
                    if ($("#newpass").val() != $("#repass").val()) {
                        $("#repass").removeClass("valid").addClass("invalid");
                        $("#repass_error").attr("data-error", "Mật khẩu không khớp");
                    }
                    else {
                        $("#repass").removeClass("invalid").addClass("valid");
                        $("#repass_error").removeAttr("data-error");
                    }
                }
                else {
                    $("#repass").removeClass("valid");
                    $("#repass").removeClass("invalid");
                }
            });
        });
    </script>
}